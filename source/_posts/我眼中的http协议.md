title: 我眼中的http协议
date: 2016-04-28 10:24:35
tags: 
 http
categories:
 http
---
URI是下面的这样的形式
>http://user:pass@www.example.jp:80/dir/index.htm?uid=1#ch1

    各部分标示的意思如下     
| 字符串 |  用途 |
| :-----: | :-----: |
| http | 协议类型|
| user：pass | 登录服务器的用户名和密码|
| www.example.jp | 服务器地址，还可以用ipv6的标示的表示形式[0:0:0:0:0:0:0:1]|
|80 |端口号|
| index.html | 带层次的文件路径|
|uid=1 |查询字符串 |
|ch1 | 片段标示符，锚|

## 请求方法
| 方法类型 |  说明 | 支持的协议版本|
| :-----: | :-----: | :-----: |
| GET | 请求http服务器上的某一个页面资源, 如果请求的是文本资源，保持原样返回；如果是CGI一样的程序，则返回执行后的输出结果，主要目的是想访问资源 |1.0,1.1|
| POST | post的主要目的是把消息传递给服务器 |1.0,1.1|
| PUT | 传输文件，但是HTTP/1.1的PUT方法不带验证机制，任何人都可以上传文件， 需要配合web应用程序的验证机制，或REST程序使用。|1.0,1.1|
|HEAD | 和GET方法一样，但是不返回报文主体，用于确认URI的有效性和资源更新的日期等|1.0,1.1|
|DELETE|删除文件，但是HTTP/1.1的DELETE方法不带验证机制，任何人都可以删除文件， 需要配合web应用程序的验证机制，或REST程序使用。|1.0,1.1|
| OPTIONS| 询问服务器只会哪些请求方法|1.1|
|TRACE | 该方法需要配合请求头中的Max-Forwards字段使用，并指定一个初始值， 如果使用了<font color="red"> 代理服务器</font>，没经过一个代理服务器，该字段值就会减1， 直到为0，服务器就返回请求内容。可能会引起跨站追踪|1.1|
|CONNECT | 要求在于代理服务器通信时候，建立隧道 |1.1|
|LINK|建立与资源之间的联系 | 1.0|
|UNLINK|断开连接关系| 1.0|

## 持久连接
没有持久连接之前，如果一个页面包含多个图片等请求，则每一服务图片的请求，都需要与服务器端建立TPC/IP连接，大大浪费了时间，有了持久连接之后，只需要建立一次TCP/IP连接，就能在其中保持多个HTTP请求和响应。<font color="red">HTTP1.1所有的连接，默认都是持久连接,主要的做法是在请求头中增加了，keep-alive选项</font>

## 管线化
持久化连接虽然能够，在一次TCP/IP连接内，进行多次HTTP请求，但是这些请求是串行的，只有一个请求结束了之后，才能继续第二个请求。管线化使得在一个TCP/IP连接内，多个请求可以并发执行

## 使用Cookie做状态管理
HTTP是无状态的协议，它不对之前发生过的请求和响应的状态进行管理，无法根据之前的状态尽心Benin的处理。但是通过服务端向客户端指定一个cookie信息，每次客户端请求的使用，使用这个cookie信息请求服务端，服务端就知道客户端的情况了。
